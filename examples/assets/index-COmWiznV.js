(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function c(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=c(t);fetch(t.href,o)}})();function a(e,i={},c=[],s={}){const t=document.createElement(e);return Object.assign(t,i),Object.assign(t.dataset,s),t.append(...c),t}const f=e=>document.createTextNode(e);function N(e){return e.toString()}function I(e,i,c){return e[i]??c}function w({anchor:e,prevStates:i,nextInputs:c,subView:s}){const t=e.parentNode;let o=i.slice();for(;o.length>c.length;){const d=o.pop();t.removeChild(d.root)}for(let d=0;d<Math.min(o.length,c.length);d++)o[d].update(c[d]);for(let d=o.length;d<c.length;d++){const m=s(c[d]);t.insertBefore(m.root,e),o.push(m)}return o}function C(e,i){let c,s;return s=i(o=>{s=o(s),c.update(s)}),c=e(s),c.root}function L(e){const i=n=>{const r=f(n.ci.name),u=f(N(n.ci.qty)),x=f(n.currency(n.ci.lineTotal)),l=a("div",{className:"flex justify-between py-1 px-0.5 border-b border-dashed border-gray-300 text-sm"},[r,f(" × "),u,f(" — "),x],{testid:`item-${n.ci.name}`}),b=l;let p=n;return{root:b,update(y){(y.ci.lineTotal!==p.ci.lineTotal||y.currency!==p.currency)&&(x.textContent=y.currency(y.ci.lineTotal)),y.ci.name!==p.ci.name&&(r.textContent=y.ci.name,l.dataset.testid=`item-${y.ci.name}`),y.ci.qty!==p.ci.qty&&(u.textContent=N(y.ci.qty)),p=y}}},c=document.createComment("for-loop-0"),s=[];let t=[];for(const n of e.cart.getItems(e.categories,e.cart.items)){const r=i({...e,ci:n});s.push(r.root),t.push(r)}s.push(c);const o=f(N(e.cart.totalQty(e.cart.items))),d=f(e.currency(e.cart.subtotal(e.categories,e.cart.items))),m=f(e.currency(e.cart.grandTotal(e.categories,e.cart.items))),g=a("div",{className:"bg-white rounded-lg p-3 my-2 shadow-md"},[a("h2",{className:"text-xl font-semibold mb-4 text-blue-900"},[f("Cart")]),a("div",{className:"flex flex-col gap-3"},[...s],{testid:"cart-items"}),a("div",{className:"grid gap-1 items-baseline py-4 px-4 bg-gray-200 rounded-md mt-3"},[a("div",{className:"text-gray-700"},[f("Items")]),a("div",{className:"text-right font-semibold tabular-nums"},[o],{testid:"total-qty"}),a("div",{className:"text-gray-700"},[f("Subtotal")]),a("div",{className:"text-right font-semibold tabular-nums"},[d],{testid:"subtotal-amount"})]),a("div",{className:"bg-blue-100 rounded-md p-3 mt-3 text-center font-bold text-blue-900"},[f("Grand Total: "),m],{testid:"grand-total"})],{testid:"cart-section"});let v=e;return{root:g,update(n){(n.cart.grandTotal!==v.cart.grandTotal||n.cart.items!==v.cart.items||n.categories!==v.categories||n.currency!==v.currency)&&(m.textContent=n.currency(n.cart.grandTotal(n.categories,n.cart.items))),(n.cart.items!==v.cart.items||n.cart.subtotal!==v.cart.subtotal||n.categories!==v.categories||n.currency!==v.currency)&&(d.textContent=n.currency(n.cart.subtotal(n.categories,n.cart.items))),(n.cart.items!==v.cart.items||n.cart.totalQty!==v.cart.totalQty)&&(o.textContent=N(n.cart.totalQty(n.cart.items))),t=w({anchor:c,prevStates:t,nextInputs:n.cart.getItems(n.categories,n.cart.items).map(r=>({...n,ci:r})),subView:i}),v=n}}}function M(e){const i=d=>{const m=l=>{const b=f(l.item.name),p=f(l.currency(l.item.price)),y=a("button",{className:"w-10 py-2",onclick:l.cart.increment(l.item.id),title:"Add"},[f("+")],{testid:`add-${l.item.name}`}),E=a("button",{className:"w-10 py-2",onclick:l.cart.decrement(l.item.id),title:"Remove"},[f("-")],{testid:`remove-${l.item.name}`}),S=f(N(I(l.cart.items,l.item.id,0))),A=a("div",{className:"bg-white rounded-md p-3 transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 shadow-sm"},[a("div",{className:"flex flex-col gap-3"},[a("div",{className:"flex items-center justify-between gap-2"},[a("div",{className:"font-semibold"},[b]),a("div",{className:"bg-blue-600 text-white rounded-full px-2 py-1 text-xs font-semibold"},[p])]),a("div",{className:"flex items-center justify-between gap-2"},[a("div",{className:"text-center"},[y,E]),a("div",{className:"bg-gray-50 border border-dashed border-gray-300 rounded-full px-2 py-1 font-semibold text-sm flex items-center"},[f("Qty: "),S])])])]);let T=l;return{root:A,update(h){(h.cart.decrement!==T.cart.decrement||h.item.id!==T.item.id)&&(E.onclick=h.cart.decrement(h.item.id)),(h.cart.increment!==T.cart.increment||h.item.id!==T.item.id)&&(y.onclick=h.cart.increment(h.item.id)),(h.cart.items!==T.cart.items||h.item.id!==T.item.id)&&(S.textContent=N(I(h.cart.items,h.item.id,0))),(h.currency!==T.currency||h.item.price!==T.item.price)&&(p.textContent=h.currency(h.item.price)),h.item.name!==T.item.name&&(b.textContent=h.item.name,y.dataset.testid=`add-${h.item.name}`,E.dataset.testid=`remove-${h.item.name}`),T=h}}},g=document.createComment("for-loop-0"),v=[];let n=[];for(const l of d.cat.items){const b=m({...d,item:l});v.push(b.root),n.push(b)}v.push(g);const r=f(d.cat.name),u=a("div",{className:"bg-gray-50 rounded-md p-3 border-l-4 border-blue-600"},[a("h3",{className:"text-lg font-medium mb-3 mt-0"},[r]),a("div",{className:"flex flex-col gap-3"},[...v])]);let x=d;return{root:u,update(l){l.cat.name!==x.cat.name&&(r.textContent=l.cat.name),n=w({anchor:g,prevStates:n,nextInputs:l.cat.items.map(b=>({...l,item:b})),subView:m}),x=l}}},c=document.createComment("for-loop-0"),s=[];let t=[];for(const d of e.categories){const m=i({...e,cat:d});s.push(m.root),t.push(m)}return s.push(c),{root:a("div",{className:"rounded-lg p-4 shadow-md"},[a("h2",{className:"text-xl font-semibold mb-4 text-blue-900"},[f("Menu")]),a("div",{className:"flex flex-col gap-3"},[...s])],{testid:"menu-section"}),update(d){t=w({anchor:c,prevStates:t,nextInputs:d.categories.map(m=>({...d,cat:m})),subView:i})}}}function V(e){const i=r=>({root:f(`
      `),update(x){}}),c=r=>{const u=a("input",{className:"border border-gray-300 rounded-md px-3 py-2 w-full",oninput:r.order.updateTable,placeholder:"Table Number",value:r.dinein.table},[],{testid:"table-input"}),x=a("div",{className:"mb-4"},[u]);let l=r;return{root:x,update(b){b.dinein.table!==l.dinein.table&&(u.value=b.dinein.table),b.order.updateTable!==l.order.updateTable&&(u.oninput=b.order.updateTable),l=b}}},s=r=>{const u=a("input",{className:"border border-gray-300 rounded-md px-3 py-2 w-full",oninput:r.order.updateAddress,placeholder:"Delivery Address",value:r.delivery.address},[],{testid:"address-input"}),x=a("div",{className:"mb-4"},[u]);let l=r;return{root:x,update(b){b.delivery.address!==l.delivery.address&&(u.value=b.delivery.address),b.order.updateAddress!==l.order.updateAddress&&(u.oninput=b.order.updateAddress),l=b}}};let t;const o=(()=>{switch(e.order.details.type){case"pickup":{({...e,pickup:e.order.details});const u=i();return t=u,u.root}case"dinein":{const u={...e,dinein:e.order.details},x=c(u);return t=x,x.root}case"delivery":{const u={...e,delivery:e.order.details},x=s(u);return t=x,x.root}default:{const u={root:document.createComment("switch-empty"),update:x=>{}};return t=u,u.root}}})(),d=a("button",{className:"px-2 py-2",onclick:e.order.selectOrder("pickup")},[f("Pick Up")],{testid:"pickup-btn"}),m=a("button",{className:"px-2 py-2",onclick:e.order.selectOrder("dinein")},[f("Dine In")],{testid:"dinein-btn"}),g=a("button",{className:"px-2 py-2",onclick:e.order.selectOrder("delivery")},[f("Delivery")],{testid:"delivery-btn"}),v=a("div",{className:"bg-white rounded-lg p-4 my-3 shadow-md"},[a("h2",{className:"text-xl font-semibold mb-4 text-blue-900"},[f("Order")]),a("div",{className:"mb-4 flex gap-1"},[d,m,g]),o]);let n=e;return{root:v,update(r){r.order.selectOrder!==n.order.selectOrder&&(d.onclick=r.order.selectOrder("pickup"),m.onclick=r.order.selectOrder("dinein"),g.onclick=r.order.selectOrder("delivery"));const u=r.order.details.type,x=n.order.details.type;if(u!==x){let l,b;switch(u){case"pickup":{({...r,pickup:r.order.details},l=i()),b=l.root;break}case"dinein":{const p={...r,dinein:r.order.details};l=c(p),b=l.root;break}case"delivery":{const p={...r,delivery:r.order.details};l=s(p),b=l.root;break}default:l={root:document.createComment("switch-empty"),update:p=>{}},b=l.root}t.root.replaceWith(b),t=l}else switch(u){case"pickup":{const l={...r,pickup:r.order.details};t.update(l);break}case"dinein":{const l={...r,dinein:r.order.details};t.update(l);break}case"delivery":{const l={...r,delivery:r.order.details};t.update(l);break}}n=r}}}function q(e){const i=M({cart:e.cart,categories:e.categories,currency:e.currency}),c=i.root,s=V({order:e.order}),t=s.root,o=L({cart:e.cart,categories:e.categories,currency:e.currency}),d=o.root;return{root:a("div",{},[a("h1",{className:"p-4"},[f("Cafe Example")]),a("div",{className:"flex gap-4 p-4"},[a("div",{className:"grow"},[c]),a("div",{className:"flex flex-col gap-4"},[a("div",{},[t]),a("div",{},[d])])])],{testid:"cafe-app"}),update(g){i.update({cart:g.cart,categories:g.categories,currency:g.currency}),s.update({order:g.order}),o.update({cart:g.cart,categories:g.categories,currency:g.currency})}}}function K(e){const i=f(N(e.count)),c=a("button",{className:"px-8 py-4",onclick:e.clickHandler},[f("Clicked "),i,f(" times")],{testid:"counter-button"}),s=a("div",{},[a("h1",{className:"p-4"},[f("Counter Example")]),a("div",{className:"p-4"},[c])],{testid:"counter-app"});let t=e;return{root:s,update(o){o.clickHandler!==t.clickHandler&&(c.onclick=o.clickHandler),o.count!==t.count&&(i.textContent=N(o.count)),t=o}}}function Q(e){let i=e.component();const c=a("button",{className:"w-30 py-2",onclick:e.setExample("cafe")},[f("Cafe")]),s=a("button",{className:"w-30 py-2",onclick:e.setExample("todo")},[f("Todo")]),t=a("button",{className:"w-30 py-2",onclick:e.setExample("counter")},[f("Counter")]),o=a("div",{},[a("div",{className:"flex gap-2 bg-blue-50 p-4"},[c,s,t]),i]);let d=e;return{root:o,update(m){if(m.setExample!==d.setExample&&(c.onclick=m.setExample("cafe"),s.onclick=m.setExample("todo"),t.onclick=m.setExample("counter")),m.component!==d.component){const g=m.component();i.replaceWith(g),i=g}d=m}}}function $(e){const i=r=>{const u=a("input",{checked:r.todo.completed,className:"w-5 h-5 text-purple-400 accent-purple-400 cursor-pointer",onchange:r.toggleHandler(r.todo.id),type:"checkbox"},[]),x=f(r.todo.text),l=a("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium cursor-pointer transition-all duration-300 hover:bg-red-600 hover:scale-105 active:scale-95",onclick:r.deleteHandler(r.todo.id),type:"button"},[f("Delete")]),b=a("li",{className:"flex items-center gap-3 px-5 py-4 mb-3 bg-white border-2 border-gray-100 rounded-xl transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 animate-[slideIn_0.4s_ease-in]"},[u,a("span",{className:"flex-1 text-base font-medium"},[x]),l]);let p=r;return{root:b,update(y){(y.deleteHandler!==p.deleteHandler||y.todo.id!==p.todo.id)&&(l.onclick=y.deleteHandler(y.todo.id)),y.todo.completed!==p.todo.completed&&(u.checked=y.todo.completed),(y.todo.id!==p.todo.id||y.toggleHandler!==p.toggleHandler)&&(u.onchange=y.toggleHandler(y.todo.id)),y.todo.text!==p.todo.text&&(x.textContent=y.todo.text),p=y}}},c=document.createComment("for-loop-0"),s=[];let t=[];for(const r of e.todos){const u=i({...e,todo:r});s.push(u.root),t.push(u)}s.push(c);const o=a("input",{className:"grow",oninput:e.updateNewTodoText,onkeypress:e.handleKeyPress,placeholder:"Add a new todo...",type:"text",value:e.newTodoText},[],{testid:"todo-input"}),d=a("button",{className:"px-8 py-4",onclick:e.addTodoHandler},[f("Add Todo")],{testid:"add-todo-btn"}),m=f(N(e.totalCount(e.todos))),g=f(N(e.completedCount(e.todos))),v=a("div",{},[a("h1",{className:"p-4"},[f("Todo Example")]),a("div",{className:"flex gap-3 mb-8 p-4 items-center"},[o,d]),a("div",{className:"mb-8 p-4"},[a("ul",{className:"p-0 m-0"},[...s],{testid:"todo-list"})]),a("div",{className:"p-4"},[a("div",{className:"flex justify-between gap-4 px-5 py-5 bg-gradient-to-r from-gray-100 to-gray-200 rounded-xl border-2 border-gray-200 min-h-5"},[a("p",{className:"m-0 text-base font-semibold text-gray-700"},[f("Total todos: "),m],{testid:"total-count"}),a("p",{className:"m-0 text-base font-semibold text-gray-700"},[f("Completed: "),g],{testid:"completed-count"})])])],{testid:"todo-app"});let n=e;return{root:v,update(r){r.addTodoHandler!==n.addTodoHandler&&(d.onclick=r.addTodoHandler),(r.completedCount!==n.completedCount||r.todos!==n.todos)&&(g.textContent=N(r.completedCount(r.todos))),r.handleKeyPress!==n.handleKeyPress&&(o.onkeypress=r.handleKeyPress),r.newTodoText!==n.newTodoText&&(o.value=r.newTodoText),(r.todos!==n.todos||r.totalCount!==n.totalCount)&&(m.textContent=N(r.totalCount(r.todos))),r.updateNewTodoText!==n.updateNewTodoText&&(o.oninput=r.updateNewTodoText),t=w({anchor:c,prevStates:t,nextInputs:r.todos.map(u=>({...r,todo:u})),subView:i}),n=r}}}const B=[{name:"Coffee",items:[{id:"espresso",name:"Espresso",price:300},{id:"latte",name:"Latte",price:350}]},{name:"Tea",items:[{id:"black-tea",name:"Black Tea",price:250},{id:"green-tea",name:"Green Tea",price:280}]}];function O(e){return e.reduce((i,c)=>i+c,0)}function k(){return C(q,e=>({categories:B,cart:{items:{},decrement:c=>()=>{e(s=>(s.cart.items[c]??0)<=0?s:{...s,cart:{...s.cart,items:{...s.cart.items,[c]:(s.cart.items[c]??0)-1}}})},increment:c=>()=>{e(s=>({...s,cart:{...s.cart,items:{...s.cart.items,[c]:(s.cart.items[c]??0)+1}}}))},getItems:function(c,s){const t=Object.fromEntries(c.flatMap(o=>o.items).map(o=>[o.id,[o.name,o.price]]));return Object.entries(s).map(([o,d])=>{const[m,g]=t[o];return{qty:d,lineTotal:d*g,name:m}}).filter(o=>o.qty>0)},grandTotal:function(c,s){const t=Object.fromEntries(c.flatMap(o=>o.items).map(o=>[o.id,o.price]));return O(Object.entries(s).map(([o,d])=>{const m=t[o];return d*m}))},subtotal:function(c,s){const t=Object.fromEntries(c.flatMap(o=>o.items).map(o=>[o.id,o.price]));return O(Object.entries(s).map(([o,d])=>{const m=t[o];return d*m}))},totalQty:function(c){return O(Object.values(c))}},currency:function(c){return(c/100).toLocaleString("en-GB",{style:"currency",currency:"GBP"})},order:{details:{type:"pickup"},selectOrder:c=>()=>{e(s=>{let t;switch(c){case"dinein":t={type:"dinein",table:""};break;case"delivery":t={type:"delivery",address:""};break;case"pickup":t={type:"pickup"};break;default:t=s.order.details;break}return{...s,order:{...s.order,details:t}}})},updateTable:c=>{e(s=>({...s,order:{...s.order,details:{type:"dinein",table:c.target.value}}}))},updateAddress:c=>{e(s=>({...s,order:{...s.order,details:{type:"delivery",address:c.target.value}}}))}}}))}function H(){return C(K,e=>({clickHandler:()=>{e(i=>({...i,count:i.count+1}))},count:0}))}function j(){let e=1;return C($,i=>{const c=()=>{i(t=>{const o=t.newTodoText.trim();if(!o)return t;const d={id:String(e++),text:o,completed:!1},m=[...t.todos,d];return{...t,todos:m,newTodoText:""}})};return{todos:[],newTodoText:"",totalCount:t=>t.length,completedCount:t=>t.filter(o=>o.completed).length,addTodoHandler:()=>{c()},updateNewTodoText:t=>{const o=t.target;i(d=>({...d,newTodoText:o.value}))},handleKeyPress:t=>{t.key==="Enter"&&c()},toggleHandler:t=>()=>{i(o=>{const d=o.todos.map(m=>m.id===t?{...m,completed:!m.completed}:m);return{...o,todos:d}})},deleteHandler:t=>()=>{i(o=>{const d=o.todos.filter(m=>m.id!==t);return{...o,todos:d}})}}})}const P={cafe:k,counter:H,todo:j},D=P[document.location.hash.slice(1)]??k;function G(){return C(Q,e=>({runCafe:k,runCounter:H,runTodo:j,component:D,setExample:i=>()=>{document.location.hash=i,e(c=>({...c,component:P[i]??k}))}}))}document.getElementById("app").append(G());
