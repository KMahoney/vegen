(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();function m(d,r={},l=[],c={}){const e=document.createElement(d);return Object.assign(e,r),Object.assign(e.dataset,c),e.append(...l),e}const p=d=>document.createTextNode(d);function g(d){return d.toString()}function N(d,r,l){return d?r:l}function b({anchor:d,prevStates:r,nextInputs:l,subView:c}){const e=d.parentNode;let t=r.slice();for(;t.length>l.length;){const o=t.pop();e.removeChild(o.root)}for(let o=0;o<Math.min(t.length,l.length);o++)t[o].update(l[o]);for(let o=t.length;o<l.length;o++){const s=c(l[o]);e.insertBefore(s.root,d),t.push(s)}return t}function H(d,r){let l,c;return c=r(()=>c,o=>{c=o,l.update(o)}),l=d(c),l.root}function v(d){const r=n=>{const f=m("input",{type:"checkbox",checked:n.todo.completed,onchange:n.toggleHandler(n.todo.id)},[]),x=p(n.todo.text),y=m("button",{type:"button",onclick:n.deleteHandler(n.todo.id),className:"delete-btn"},[p("Delete")]),C=m("li",{className:N(n.todo.completed,"completed","")},[f,m("span",{className:"todo-text"},[x]),y]),w=C;let h=n;return{root:w,update(i){(i.deleteHandler!==h.deleteHandler||i.todo.id!==h.todo.id)&&(y.onclick=i.deleteHandler(i.todo.id)),i.todo.completed!==h.todo.completed&&(f.checked=i.todo.completed,C.className=N(i.todo.completed,"completed","")),i.todo.text!==h.todo.text&&(x.textContent=i.todo.text),(i.toggleHandler!==h.toggleHandler||i.todo.id!==h.todo.id)&&(f.onchange=i.toggleHandler(i.todo.id)),h=i}}},l=document.createComment("for-loop-0"),c=[];let e=[];for(const n of d.todos){const f=r({...d,todo:n});c.push(f.root),e.push(f)}c.push(l);const t=m("input",{type:"text",placeholder:"Add a new todo...",value:d.newTodoText,oninput:d.updateNewTodoText,onkeypress:d.handleKeyPress},[]),o=m("button",{type:"button",onclick:d.addTodoHandler},[p("Add Todo")]),s=p(g(d.totalCount)),u=p(g(d.completedCount)),a=m("div",{},[m("h1",{className:"b"},[p("Todo App")]),m("div",{className:"add-todo"},[t,o]),m("div",{className:"todo-list"},[m("ul",{},[...c])]),m("div",{className:"todo-stats"},[m("p",{},[p("Total todos: "),s]),m("p",{},[p("Completed: "),u])])]);let T=d;return{root:a,update(n){n.addTodoHandler!==T.addTodoHandler&&(o.onclick=n.addTodoHandler),n.completedCount!==T.completedCount&&(u.textContent=g(n.completedCount)),n.handleKeyPress!==T.handleKeyPress&&(t.onkeypress=n.handleKeyPress),n.newTodoText!==T.newTodoText&&(t.value=n.newTodoText),n.totalCount!==T.totalCount&&(s.textContent=g(n.totalCount)),n.updateNewTodoText!==T.updateNewTodoText&&(t.oninput=n.updateNewTodoText),e=b({anchor:l,prevStates:e,nextInputs:n.todos.map(f=>({...n,todo:f})),subView:r}),T=n}}}let S=1;document.querySelector("#app").append(H(v,(d,r)=>{const l=()=>{const e=d(),t=e.newTodoText.trim();if(t){const o={id:String(S++),text:t,completed:!1},s=[...e.todos,o],u=s.filter(a=>a.completed).length;r({...e,todos:s,newTodoText:"",totalCount:s.length,completedCount:u})}};return{todos:[],newTodoText:"",totalCount:0,completedCount:0,addTodoHandler:()=>{l()},updateNewTodoText:e=>{const t=d(),o=e.target;r({...t,newTodoText:o.value})},handleKeyPress:e=>{e.key==="Enter"&&l()},toggleHandler:e=>t=>{const o=d(),s=o.todos.map(a=>a.id===e?{...a,completed:!a.completed}:a),u=s.filter(a=>a.completed).length;r({...o,todos:s,completedCount:u})},deleteHandler:e=>t=>{const o=d(),s=o.todos.filter(a=>a.id!==e),u=s.filter(a=>a.completed).length;r({...o,todos:s,totalCount:s.length,completedCount:u})}}}));
